<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>表观遗传与生物信息 - 思考问题的熊</title>
<link rel="shortcut icon" href="https://kaopubear.top//favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css">
<link rel="stylesheet" href="https://kaopubear.top//media/css/tailwind.css">
<link rel="stylesheet" href="https://kaopubear.top//styles/main.css">
<link rel="alternate" type="application/atom+xml" title="表观遗传与生物信息 - 思考问题的熊 - Atom Feed" href="https://kaopubear.top//atom.xml">


  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-91022805-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-91022805-1');
  </script>
    

  <meta name="description" content="不同层次的表观



Broadly, features at different levels of chromatin organization are generally associated with inactive (off) ..." />
  <meta property="og:title" content="表观遗传与生物信息 - 思考问题的熊">
  <meta property="og:description" content="不同层次的表观



Broadly, features at different levels of chromatin organization are generally associated with inactive (off) ..." />
  <meta property="og:type" content="articles">
  <meta property="og:url" content="https://kaopubear.top/post/2017-08-17-longxing-bioinfo-epigenetic/" />
  <meta property="og:image" content="ttps://raw.githubusercontent.com/fei0810/image-host/master/img/177622-38231516d4752d09.jpg">
  <meta property="og:image:height" content="630">
  <meta property="og:image:width" content="1200">
  <meta name="twitter:title" content="表观遗传与生物信息 - 思考问题的熊">
  <meta name="twitter:description" content="不同层次的表观



Broadly, features at different levels of chromatin organization are generally associated with inactive (off) ...">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://kaopubear.top/post/2017-08-17-longxing-bioinfo-epigenetic/">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
 
  
    <link rel="stylesheet" href="https://kaopubear.top//media/css/prism-github.css">
  

  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
  
</head>

<body>
  <div class="antialiased flex flex-col min-h-screen" id="app">
    <a href="https://kaopubear.top/" class="fixed top-0 left-0 mt-4 bg-black text-white dark:text-gray-700 dark:bg-yellow-50 dark:hover:bg-black dark:hover:text-white inline-flex p-2 pl-8 hover:text-gray-700 hover:bg-yellow-50 font-bold z-10 transition-fast animated fadeInLeft">
      思考问题的熊
    </a>
    <div class="max-w-4xl w-full mx-auto">
      <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 md:pt-64 px-4 md:px-8 pb-8 animated fadeIn mb-8">
        <h1 class="text-5xl font-semibold leading-normal pb-8 mb-8 border-b-8 border-gray-700">
          表观遗传与生物信息
        </h1>
        
          <img src="ttps://raw.githubusercontent.com/fei0810/image-host/master/img/177622-38231516d4752d09.jpg" alt="表观遗传与生物信息" class="block w-full mb-8">
        
        <div class="mb-8 flex flex-wrap">
          <div class="text-gray-400 text-sm mr-4">2017-08-17 · 6 min read</div>
          
            <a href="https://kaopubear.top/tag/DvI6ypPftI/" class="text-gray-700 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              生物信息
            </a>
          
            <a href="https://kaopubear.top/tag/MoSquIwnNqz/" class="text-gray-700 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              表观遗传
            </a>
          
        </div>
        <div class="markdown mb-8" v-pre>
          <h2 id="不同层次的表观">不同层次的表观</h2>
<!--more-->
<figure data-type="image" tabindex="1"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-354dda16cd5cdf70.jpg" alt="" loading="lazy"></figure>
<ul>
<li>Broadly, features at different levels of chromatin organization are generally associated with inactive (off) or active (on) transcription.</li>
<li>From the top, genomic DNA is methylated(Me) on cytosine bases in specific contexts and is packaged into nucleosomes, which vary in histone composition and histone modifications (for example, histone H3 lysine 9 trimethylation (H3K9me3)); these features constitute the primary layer of chromatinstructure.</li>
<li>Here, different histone modifications are indicated by coloured dots and histone variants such as H2A.Z are brown.</li>
<li>DNA in chromatin may remain accessible to DNA-binding proteins such as transcription factors (TFs) and RNA polymerase II (RNAPII)or may be further compacted.</li>
<li>Chromatin can also organize into higher-order structuressuch as nuclear lamina-associated domains and transcription factories.</li>
<li>DOI:10.1038/nrg2905</li>
</ul>
<h2 id="表观实例">表观实例</h2>
<p>基因印迹</p>
<figure data-type="image" tabindex="2"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-a618faca55fcf197.jpg" alt="" loading="lazy"></figure>
<h2 id="表观遗传定义">表观遗传定义</h2>
<ul>
<li>A mitotically or meiotically heritable state of different gene activity and expression (phenotype) that is independent of differences in DNA sequence (genotype) – based on Conrad Waddington, 1942</li>
<li>The sum of the alterations to the chromatin template that collectively establish and propagate different patterns of gene expression (transcription) and silencing from the same genome.</li>
<li>Epigenetic changes influence the phenotype without altering the genotype.</li>
<li>While epigenetics often refers to the study of single genes or sets of genes, epigenomics refers to more global analyses of epigenetic changes across the entire genome.</li>
</ul>
<h2 id="表观基因组-epigenome">表观基因组 epigenome</h2>
<ul>
<li>The complete number,location, and types ofepigenetic modificationsthat occur in a given cell</li>
</ul>
<h2 id="epigenetic-mechanisms">Epigenetic mechanisms</h2>
<h3 id="dna-methylation">DNA methylation</h3>
<ul>
<li>Normal cells — role in gene expression and chromosome stability</li>
<li>Cancer cells — consequences of aberrant hypo- and hyper-methylation</li>
</ul>
<h3 id="histone-modification">Histone modification</h3>
<ul>
<li>Normal cells — the histone code</li>
<li>Cancer cells — consequences of altered histone modifying enzymes</li>
</ul>
<p>Interaction between DNA methylation, histone modifications, and other players such as non-coding RNAs</p>
<p>Cell and tissue type specificity</p>
<p>Gene-environment interaction, disease susceptibility</p>
<h2 id="dna-methylation-2">DNA methylation</h2>
<h3 id="human-特征">human 特征</h3>
<figure data-type="image" tabindex="3"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-a3496c1dd5bb3f73.jpg" alt="" loading="lazy"></figure>
<ul>
<li>DNA methylation occurs mostly in CG context, but also non-CG sequences (mCHG, mCHH)</li>
<li>DNA methylation is generally depleted from promoters, and enriched within gene bodies</li>
<li>DNA methylation is partially depleted at regulatory element</li>
</ul>
<h3 id="植物中有特殊的-rddm">植物中有特殊的 RdDM</h3>
<h3 id="bisulfite-sequencing">bisulfite sequencing</h3>
<p><strong>基本原理</strong></p>
<figure data-type="image" tabindex="4"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-9cfabba1d47bd07f.jpg" alt="" loading="lazy"></figure>
<ul>
<li>DNA 的重亚硫酸盐转化来检测未甲基化的胞嘧啶</li>
<li>在文库制备过程中，重亚硫酸盐将未甲基化的胞嘧啶转化成尿嘧啶</li>
<li>转化后的碱基在测序中被识别为胸腺嘧啶（PCR 后），并通过序列计数来确定甲基化胞嘧啶的比例</li>
</ul>
<p><strong>比对的过程需要进行转换</strong></p>
<figure data-type="image" tabindex="5"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-ab2b76773d283de7.jpg" alt="" loading="lazy"></figure>
<p><strong>常用 mapping 软件算法</strong></p>
<ul>
<li>bismark</li>
</ul>
<figure data-type="image" tabindex="6"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-1a2c6471b8e64af5.jpg" alt="" loading="lazy"></figure>
<ul>
<li>bsmap</li>
</ul>
<figure data-type="image" tabindex="7"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-ffb9789d4a025013.jpg" alt="" loading="lazy"></figure>
<ul>
<li>
<p>Bisulfite seed table, using the original seed and bisulfite variants as keys and corresponding coordinates in the reference genome as values. Each read was looked up in the seed table for potential mapping positions.</p>
</li>
<li>
<p>A positional specific mask of the corresponding reference sequence was generated by setting 01 to C(light blue) and 11 to A, G, T(black). The original read was masked by a bitwise AND operation with the positional specific mask.</p>
</li>
<li>
<p>The reference sequence and the masked read were compared with a bitwise XOR operation. Non-zero XOR results were counted as mismatches (red). Bisulfite alignment is marked in green.</p>
</li>
</ul>
<h3 id="methylated-dna-immunoprecipitation-medip">Methylated DNA immunoprecipitation (MeDIP)</h3>
<ul>
<li>甲基化 DNA 免疫共沉淀测序</li>
<li>use 5-methylcytosine antibody</li>
<li>富集甲基化的 DNA 序列</li>
<li>有甲基化的地方会有 peak</li>
<li>不能精确到单碱基分辨率，这能知道一段区域的甲基化程度</li>
</ul>
<h3 id="methyl-sensitive-restriction-enzymes-mres">Methyl-sensitive restriction enzymes (MREs)</h3>
<ul>
<li>
<p>Unmethylated CpGs are identified by sequencing size selected fragments from parallel DNA digestions with the methyl-sensitive restriction enzymes (MREs)</p>
</li>
<li>
<p>没有甲基化的地方会有 peak</p>
</li>
<li>
<p>甲基化敏感性限制酶测序 (MRE-seq) 技术主要利用甲基化敏感性限制性酶 (methylation-sensitive restriction enzyme, MRE) 对基因组 DNA 进行切割，未甲基化位点可以被酶切而产生不同长度的片段，然后，结合高通量测序技术获得序列的甲基化信息</p>
</li>
<li>
<p>和 MeDIP 结合使用</p>
<figure data-type="image" tabindex="8"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-b2ecf644450ff688.jpg" alt="" loading="lazy"></figure>
</li>
<li>
<p>plant DOI:10.1146/annurev-arplant-043014-114633</p>
</li>
<li>
<p>human DOI:10.1038/nature08514</p>
</li>
</ul>
<h2 id="组蛋白修饰">组蛋白修饰</h2>
<h3 id="h3k4me3-含义">H3K4me3 含义</h3>
<figure data-type="image" tabindex="9"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-b1902497c38fc017.jpg" alt="" loading="lazy"></figure>
<h3 id="组蛋白修饰功能">组蛋白修饰功能</h3>
<figure data-type="image" tabindex="10"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-22de42c4286ff453.jpg" alt="" loading="lazy"></figure>
<ul>
<li>Promoters, gene bodies, an enhancer and a boundary element are indicated on a schematic genomic region.</li>
<li>Active promoters are commonly marked by H3K4me2, H3K4me3, acetylation (ac), and H2A.Z.</li>
<li>Transcribed regions are enriched for H3K36me3 and H3K79me2.</li>
<li>Repressed genes may be located in large domains of H3K9me2 and/or H3K9me3 or H3K27me3.</li>
<li>Enhancers are relatively enriched for H3K4me1, H3K4me2, H3K27ac and the histone acetyltransferase p300.</li>
<li>CTCF binds many sites that may function as boundary elements, insulators or structural scaffolds</li>
</ul>
<h3 id="如何整合众多的-chip-seq-数据">如何整合众多的 ChIP-seq 数据</h3>
<p><strong>半自动基因注释</strong></p>
<figure data-type="image" tabindex="11"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-38231516d4752d09.jpg" alt="" loading="lazy"></figure>
<p><strong>两种常用算法</strong></p>
<h4 id="chromhmm">ChromHMM</h4>
<figure data-type="image" tabindex="12"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-34fa1a2cd2666169.jpg" alt="" loading="lazy"></figure>
<p>输入参数</p>
<figure data-type="image" tabindex="13"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-40c25e82cee9682d.jpg" alt="" loading="lazy"></figure>
<ul>
<li>
<p>算法是 HMM，具体隐马尔可夫模型参考另一篇笔记</p>
</li>
<li>
<p>属于 HMM 中的 learning 类问题</p>
</li>
<li>
<p>使用迭代方法是 EM</p>
</li>
<li>
<p>200 bp resolution</p>
</li>
<li>
<p>Bernoulli to model emission</p>
</li>
<li>
<p>Posterior decoding</p>
</li>
<li>
<p>Single model for all cell types</p>
</li>
</ul>
<h4 id="segway">Segway</h4>
<figure data-type="image" tabindex="14"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-128e2ca0197855f0.jpg" alt="" loading="lazy"></figure>
<ul>
<li>基于贝叶斯动态网络</li>
<li>1 bp resolution</li>
<li>Gaussian to model emission</li>
<li>Viterbi decoding</li>
<li>One model per cell type</li>
</ul>
<h3 id="基因浏览器展示">基因浏览器展示</h3>
<figure data-type="image" tabindex="15"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-e1d1e808beafe838.jpg" alt="" loading="lazy"></figure>
<p>具体学习地址</p>
<ul>
<li>
<p><a href="http://www.ensembl.org/info/genome/funcgen/regulatory_segmentation.html">ensembl</a></p>
</li>
<li>
<p><a href="https://genome.ucsc.edu/cgi-bin/hgTrackUi?hgsid=602267329_ZKudaZlz5EEJC7GtzQakQ3aDfF1w&amp;c=chr21&amp;g=wgEncodeAwgSegmentation">Genome Segmentations from ENCODE</a></p>
</li>
</ul>
<h2 id="human-表观数据库">human 表观数据库</h2>
<h3 id="encode">encode</h3>
<ul>
<li>网站 <a href="https://www.encodeproject.org/">https://www.encodeproject.org/</a></li>
<li>数据下载地址<a href="http://genome.ucsc.edu/ENCODE/downloads.html">http://genome.ucsc.edu/ENCODE/downloads.html</a></li>
</ul>
<h3 id="roadmap">roadmap</h3>
<ul>
<li>网站 <a href="http://www.roadmapepigenomics.org/">http://www.roadmapepigenomics.org/</a></li>
</ul>
<hr>
<figure data-type="image" tabindex="16"><img src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" alt="" loading="lazy"></figure>
<p><strong>本文作者</strong>：思考问题的熊</p>
<p><strong>版权声明</strong>：本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by-nc-nd/4.0">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议 (CC BY-NC-ND 4.0)</a> 进行许可。</p>
<figure data-type="image" tabindex="17"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/20190628083754.png" alt="扫码即刻沟通" loading="lazy"></figure>

        </div>
        <!-- Share to Twitter, Weibo, Telegram -->
        <div class="flex items-center">
          <div class="mr-4 flex items-center">
            <i class="ri-share-forward-line text-gray-500"></i>
          </div>
          <div class="px-4 cursor-pointer text-blue-500 hover:bg-blue-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTwitter">
            <i class="ri-twitter-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-red-500 hover:bg-red-100 dark:hover:bg-gray-600 inline-flex" @click="shareToWeibo">
            <i class="ri-weibo-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-indigo-500 hover:bg-indigo-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTelegram">
            <i class="ri-telegram-line"></i>
          </div>
        </div>
      </div>

      

      
        <div id="vlaine-comment"></div>
      

      <footer class="py-12 text-center px-4 md:px-0" v-pre>
  加入<a href="https://t.zsxq.com/UjiEaYZ" target="_blank">知识星球</a><br ><a href="https://tinyletter.com/kaopubear" target="_blank">邮件订阅博客内容</a>
</footer>
    </div>

    <!-- TOC Container -->
    <div class="fixed right-0 bottom-0 mb-16 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white dark:bg-gray-500 dark:text-gray-200 hover:shadow-lg transition-all animated fadeInRight" @click="showToc = true">
      <i class="ri-file-list-line"></i>
    </div>

    <div class="fixed right-0 top-0 bottom-0 overflow-y-auto w-64 bg-white dark:bg-gray-800 p-4 border-l border-gray-100 dark:border-gray-600 z-10 transition-fast" :class="{ '-mr-64': !showToc }">
      <div class="flex mb-4 justify-end">
        <div class="w-8 h-8 inline-flex justify-center items-center rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-fast" @click="showToc = false">
          <i class="ri-close-line text-lg"></i>
        </div>
      </div>
      <div class="post-toc-container">
        <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%B8%8D%E5%90%8C%E5%B1%82%E6%AC%A1%E7%9A%84%E8%A1%A8%E8%A7%82">不同层次的表观</a></li>
<li><a href="#%E8%A1%A8%E8%A7%82%E5%AE%9E%E4%BE%8B">表观实例</a></li>
<li><a href="#%E8%A1%A8%E8%A7%82%E9%81%97%E4%BC%A0%E5%AE%9A%E4%B9%89">表观遗传定义</a></li>
<li><a href="#%E8%A1%A8%E8%A7%82%E5%9F%BA%E5%9B%A0%E7%BB%84-epigenome">表观基因组 epigenome</a></li>
<li><a href="#epigenetic-mechanisms">Epigenetic mechanisms</a>
<ul>
<li><a href="#dna-methylation">DNA methylation</a></li>
<li><a href="#histone-modification">Histone modification</a></li>
</ul>
</li>
<li><a href="#dna-methylation-2">DNA methylation</a>
<ul>
<li><a href="#human-%E7%89%B9%E5%BE%81">human 特征</a></li>
<li><a href="#%E6%A4%8D%E7%89%A9%E4%B8%AD%E6%9C%89%E7%89%B9%E6%AE%8A%E7%9A%84-rddm">植物中有特殊的 RdDM</a></li>
<li><a href="#bisulfite-sequencing">bisulfite sequencing</a></li>
<li><a href="#methylated-dna-immunoprecipitation-medip">Methylated DNA immunoprecipitation (MeDIP)</a></li>
<li><a href="#methyl-sensitive-restriction-enzymes-mres">Methyl-sensitive restriction enzymes (MREs)</a></li>
</ul>
</li>
<li><a href="#%E7%BB%84%E8%9B%8B%E7%99%BD%E4%BF%AE%E9%A5%B0">组蛋白修饰</a>
<ul>
<li><a href="#h3k4me3-%E5%90%AB%E4%B9%89">H3K4me3 含义</a></li>
<li><a href="#%E7%BB%84%E8%9B%8B%E7%99%BD%E4%BF%AE%E9%A5%B0%E5%8A%9F%E8%83%BD">组蛋白修饰功能</a></li>
<li><a href="#%E5%A6%82%E4%BD%95%E6%95%B4%E5%90%88%E4%BC%97%E5%A4%9A%E7%9A%84-chip-seq-%E6%95%B0%E6%8D%AE">如何整合众多的 ChIP-seq 数据</a>
<ul>
<li><a href="#chromhmm">ChromHMM</a></li>
<li><a href="#segway">Segway</a></li>
</ul>
</li>
<li><a href="#%E5%9F%BA%E5%9B%A0%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B1%95%E7%A4%BA">基因浏览器展示</a></li>
</ul>
</li>
<li><a href="#human-%E8%A1%A8%E8%A7%82%E6%95%B0%E6%8D%AE%E5%BA%93">human 表观数据库</a>
<ul>
<li><a href="#encode">encode</a></li>
<li><a href="#roadmap">roadmap</a></li>
</ul>
</li>
</ul>
</li>
</ul>

      </div>
    </div>

    <!-- Back to top -->
    <div class="fixed right-0 bottom-0 mb-4 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg transition-all dark:bg-gray-500 dark:text-gray-200" @click="backToUp" v-show="scrolled">
      <i class="ri-arrow-up-line"></i>
    </div>
  </div>

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg">
  </div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter">
        </div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip">
        </div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center">
        </div>
      </div>
    </div>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://kaopubear.top//media/scripts/main.js"></script>
  
  <!-- Code Highlight -->
  
    <script src="https://kaopubear.top//media/prism.js"></script>
    <script>
      Prism.highlightAll()
    </script>
  

  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>
  <script>
    //拿到预览框架，也就是上面的html代码
    var pswpElement = document.querySelectorAll('.pswp')[0];
    //定义图片数组变量
    var imgitems;
    /**
    * 用于显示预览界面
    * @param index 图片数组下标
    */
    function viewImg(index) {
      //其它选项这里不做过多阐述，详情见官网
      var pswpoptions = {
        index: parseInt(index, 10), // 开始幻灯片索引。0是第一张幻灯片。必须是整数，而不是字符串。
        bgOpacity: 0.7, // 背景透明度，0-1
        maxSpreadZoom: 3, // 缩放级别，不要太大
      };
      //初始化并打开PhotoSwipe，pswpElement对应上面预览框架，PhotoSwipeUI_Default为皮肤，imgitems为图片数组，pswpoptions为选项
      var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, imgitems, pswpoptions);
      gallery.init()
    }
    /**
    * 用于添加图片点击事件
    * @param img 图片元素
    * @param index 所属下标（在imgitems中的位置）
    */
    function addImgClick(img, index) {
      img.onclick = function() {
        viewImg(index)
      }
    }
    /**
    * 轮询所有图片，获取src、width、height等数据，加入imgitems，并给图片元素添加事件
    * 最好在onload中执行该方法，本站因放在最底部，所以直接初始化
    * 异步加载图片可在图片元素创建完成后调用此方法
    */
    function initImg() {
      //重置图片数组
      imgitems = [];
      //查找class:markdown 下的所有img元素并遍历
      var imgs = document.querySelectorAll('.markdown img');
      for (var i = 0; i < imgs.length; i++) {
        var img = imgs[i];
        //本站相册初始为loading图片，真实图片放在data-src
        var ds = img.getAttribute("data-src");
        //创建image对象，用于获取图片宽高
        var imgtemp = new Image();
        //判断是否存在data-src
        if (ds != null && ds.length > 0) {
          imgtemp.src = ds
        } else {
          imgtemp.src = img.src
        }
        //判断是否存在缓存
        if (imgtemp.complete) {
          var imgobj = {
            "src": imgtemp.src,
            "w": imgtemp.width,
            "h": imgtemp.height,
          };
          imgitems[i] = imgobj;
          addImgClick(img, i);
        } else {
          console.log('进来了2')
          imgtemp.index = i;
          imgtemp.img = img;
          imgtemp.onload = function() {
            var imgobj = {
              "src": this.src,
              "w": this.width,
              "h": this.height,
            };
            //不要使用push，因为onload前后顺序会不同
            imgitems[this.index] = imgobj
            //添加点击事件
            addImgClick(this.img, this.index);
          }
        }
      }
    }
    //初始化
    initImg();
  </script>
  
    <script type="application/javascript" src="https://unpkg.com/valine"></script>
<script type="application/javascript">
  new Valine({
    el: '#vlaine-comment',
    appId: 'HJ4ltM8KvCxAwTaMUjzls2a1-gzGzoHsz',
    appKey: 'mk4aFvoMPRnkE0VRiuYBp1mc',
    pageSize: 10,
    notify: true,
    avatar: 'mp',
    verify: true,
    placeholder: '不妨评论交流',
    visitor: true,
    highlight: true,
    recordIP: true,
  })
</script>
  
  
</body>

</html>