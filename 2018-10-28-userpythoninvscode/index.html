<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>VScode 系列 1：提升 R 和 Python 使用体验 - 思考问题的熊</title>
<link rel="shortcut icon" href="https://blog.kaopubear.top/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css">
<link rel="stylesheet" href="https://blog.kaopubear.top/media/css/tailwind.css">
<link rel="stylesheet" href="https://blog.kaopubear.top/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="VScode 系列 1：提升 R 和 Python 使用体验 - 思考问题的熊 - Atom Feed" href="https://blog.kaopubear.top/atom.xml">


  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-91022805-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-91022805-1');
  </script>
    

  <meta name="description" content="
已经攒了一系列 VS Code 写作计划和素材，之前也发过几篇基础知识的思维导图（见文末）。不过一直不知道该从哪里开始第一篇文章，如果推荐给身边的人，他们可能最关心的是用 VS Code 日常写简单的 R 和 Python 代码体验如何。..." />
  <meta property="og:title" content="VScode 系列 1：提升 R 和 Python 使用体验 - 思考问题的熊">
  <meta property="og:description" content="
已经攒了一系列 VS Code 写作计划和素材，之前也发过几篇基础知识的思维导图（见文末）。不过一直不知道该从哪里开始第一篇文章，如果推荐给身边的人，他们可能最关心的是用 VS Code 日常写简单的 R 和 Python 代码体验如何。..." />
  <meta property="og:type" content="articles">
  <meta property="og:url" content="https://blog.kaopubear.top/2018-10-28-userpythoninvscode/" />
  <meta property="og:image" content="https://raw.githubusercontent.com/fei0810/image-host/master/img/177622-745994de898f9cc0.png">
  <meta property="og:image:height" content="630">
  <meta property="og:image:width" content="1200">
  <meta name="twitter:title" content="VScode 系列 1：提升 R 和 Python 使用体验 - 思考问题的熊">
  <meta name="twitter:description" content="
已经攒了一系列 VS Code 写作计划和素材，之前也发过几篇基础知识的思维导图（见文末）。不过一直不知道该从哪里开始第一篇文章，如果推荐给身边的人，他们可能最关心的是用 VS Code 日常写简单的 R 和 Python 代码体验如何。...">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://blog.kaopubear.top/2018-10-28-userpythoninvscode/">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
 
  
    <link rel="stylesheet" href="https://blog.kaopubear.top/media/css/prism-github.css">
  

  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
  
</head>

<body>
  <div class="antialiased flex flex-col min-h-screen" id="app">
    <a href="https://blog.kaopubear.top" class="fixed top-0 left-0 mt-4 bg-black text-white dark:text-gray-700 dark:bg-yellow-50 dark:hover:bg-black dark:hover:text-white inline-flex p-2 pl-8 hover:text-gray-700 hover:bg-yellow-50 font-bold z-10 transition-fast animated fadeInLeft">
      思考问题的熊
    </a>
    <div class="max-w-4xl w-full mx-auto">
      <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 md:pt-64 px-4 md:px-8 pb-8 animated fadeIn mb-8">
        <h1 class="text-5xl font-semibold leading-normal pb-8 mb-8 border-b-8 border-gray-700">
          VScode 系列 1：提升 R 和 Python 使用体验
        </h1>
        
          <img src="https://raw.githubusercontent.com/fei0810/image-host/master/img/177622-745994de898f9cc0.png" alt="VScode 系列 1：提升 R 和 Python 使用体验" class="block w-full mb-8">
        
        <div class="mb-8 flex flex-wrap">
          <div class="text-gray-400 text-sm mr-4">2018-10-28 · 14 min read</div>
          
            <a href="https://blog.kaopubear.top/tag/fMLJ4BbHmo/" class="text-gray-700 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              VScode
            </a>
          
        </div>
        <div class="markdown mb-8" v-pre>
          <blockquote>
<p>已经攒了一系列 VS Code 写作计划和素材，之前也发过几篇基础知识的思维导图（见文末）。不过一直不知道该从哪里开始第一篇文章，如果推荐给身边的人，他们可能最关心的是用 VS Code 日常写简单的 R 和 Python 代码体验如何。那就从这里开始吧。</p>
</blockquote>
<!--more-->
<blockquote>
<p>本文以 PC 作为安装配置示例，Mac 基本类似且部分内容体验可能更优。</p>
</blockquote>
<h2 id="为什么是-vs-code">为什么是 VS Code</h2>
<p>既然是系列文章的开篇，姑且对主题按下不表先介绍一下 VS Code。</p>
<p><a href="https://code.visualstudio.com/">VS Code</a> 的全称是 Visual Studio Code，官方给他的定义是官方定义是<strong>一个免费的、开源的跨平台编辑器</strong>。相对于各种 IDE 而言，编辑器则相对更轻量，更侧重于文件或者文件夹而非宏大的项目。</p>
<figure data-type="image" tabindex="1"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-dd277e8b4360f029.png" alt="" loading="lazy"></figure>
<p>2011 年底，微软从 IBM 请 《设计模式》的作者同时也是 <a href="https://www.eclipse.org/">Eclipse</a> 掌舵人之一的 Erich Gamma 来开发一款优雅的在线开发工具（后来的 Manaco Editor），2015 年他把这款在线工具移植到了桌面平台，也就有了如今 VS Code 。师承 Eclipse 同时又吸取 Eclipse 的教训，他们决定核心只做一个高性能的轻量级编辑器，个性化功能交给插件系统来完成且要把插件系统运行在主进程之外。同时，VS Code 希望让开发者在编辑器里拥有 IDE 类似的开发体验，比如对源代码的智能理解、图形化调试工具和版本管理等等。总之，就是在 IDE 和编辑器中找到一个比较理想的平衡。</p>
<p>在很多人的印象中，微软一直是一个站在开源世界对立面，靠专利官司和垄断挣钱的公司，但其实微软近几年一直是 GitHub 贡献开源代码最活跃的公司，活跃到现在已经把 GitHub 收购了（黑人问号脸）。而在所有微软的开源项目中，star 最高的 repo 就是 VS Code 编辑器。VS Code 以 MIT 协议开源，所有的开发过程和反馈渠道完全在 GitHub 开放，同时 VS Code 提供了统一的 Language Server Protocol 和 Code Debugging Protocol API，所有语言的开发和都能够通过实现两个 API 在 VS Code 上得到类似 IDE 的开发和调试体验。</p>
<p>如果你是一个 R 语言用户，RStudio 一定是首选 IDE，如果你是一个 Python 用户，Pycharm 则是大多数人的编辑器。但如果你平时既要用点 R，也要用点 Python，偶尔感觉这些 IDE 有点臃肿或者不想在两个 IDE 中反复切换，那么 VS Code 是一个不错的选择。</p>
<p>VS Code 有两个不同版本：稳定版（Stable）每月发布更新一次；预览版（Insiders）每个工作日更新一个版本。当然，你也可以同时安装两个版本互不影响。</p>
<p>虽然我一直不喜欢微软的 office ，但是 VS Code 又让我对微软增加了不少好看。现在我日常工作中，轻度码字、写脚本、阅读 PDF 和 Excel 文本甚至查看压缩文件等工作都可以在它上面完成。离「只用一个 VS Code 完成所有事情」的目标已经不太远了。当然，如果还有什么需求没有实现，最牛的是学习自己去写一个插件。</p>
<h2 id="安装-r-和-python">安装 R 和 Python</h2>
<p>因为这篇文章的写作目的是「用 VS Code 愉快地使用 R 和 Python 」，所以默认看官已经可以自主地在电脑上安装 R 和 Python ；因为是系列文章的首篇，所以暂且不涉及复杂操作和各种使用技巧；因为默认大家是同时<strong>轻度</strong>使用 R 和 Python 所以暂时不涉及代码调试和版本管理等内容。在后面的文章中这些都会提到。</p>
<p>对于 Windows 用户 R 可以在 <a href="https://www.r-project.org/">官网</a> 下载，Python 建议安装 <a href="https://www.anaconda.com/download/">anaconda</a> 的 Python3 版本。另外这里有一篇 <a href="https://www.gaoyuan.name/20180709-chineseuser/">关于 R 安装注意事项</a> 的文章可以作为参考。</p>
<h2 id="配置-r-插件">配置 R 插件</h2>
<p>VS Code 对语言的支持方式是提供统一的开发 API，即 Language Server Protocol。各种语言可以能够通过这个 API 在 VS Code 上得到类似 IDE 的体验，这种服务在 VS Code 中称为<strong>语言服务</strong>。</p>
<p>语言服务会根据我们的项目、当前文件和光标所在位置为我们提供一个建议列表，包括在当前光标位置下我们可能会输入的各种代码函数。随着字符的输入 VS Code 会根据字符输入内容自动对列表进行过滤。</p>
<p>目前 JavaScript、Python、PHP 等几大主流语言在 VS Code 中都已经有很完善的支持，但是 R 核心插件还是第三方贡献的，想要配置的顺手还需要一些操作。实现 R 语言服务必需要有如下前两个插件（插件管理可以在左侧侧边栏找到，然后在搜索框里搜索<code>R</code>即可）。</p>
<h3 id="r-support-for-visual-studio-code"><a href="https://marketplace.visualstudio.com/items?itemName=Ikuyadeu.r">R support for Visual Studio Code</a></h3>
<p>这个插件是 VS Code 中 R 的核心插件，具有语法高亮，基础代码片段和代码执行等功能。例如你可以在编辑器中选择某几行内容，然后使用<code>ctrl + enter</code>将代码发送到终端执行。</p>
<h3 id="r-lsp-client"><a href="https://marketplace.visualstudio.com/items?itemName=REditorSupport.r-lsp">R LSP Client</a></h3>
<p>这个插件在主页的介绍是</p>
<blockquote>
<p>R language support for <a href="https://code.visualstudio.com/">VS Code</a>, powered by the <a href="https://github.com/REditorSupport/languageserver">R language server</a>.</p>
</blockquote>
<p>也就是我们上文提到的「Language Server Protocol」，有了这个它就可以进行<strong>代码补全、查看函数定义以及参数预览</strong>了。不过想让它生效还需要下面几个小步骤：</p>
<p><strong>在 R 中安装 <code>languageserver</code> 包</strong></p>
<p><code>install.packages(&quot;languageserver&quot;)</code>，只有安装了这个包才能实现 R 和 编辑器的同步。</p>
<p><strong>在 VS Code 中设置正确的 R 路径</strong></p>
<p>打开设置界面，在搜索框中输入 <code>r.rterm</code>，找到 Rterm:Windows ，在编辑栏中输入你的 R 可执行文件位置。如果是默认安装的 R 3.5.1 版本，位置应该是<code>C:\Program Files\R\R-3.5.1\bin\x64\R.exe</code></p>
<figure data-type="image" tabindex="2"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-35a909d9de8b60f9.png" alt="" loading="lazy"></figure>
<p><strong>在 VS Code 中设置正确的 R LSP 路径</strong></p>
<p>和上面的方法相同，只不过这次搜索<code>r.rpath.lsp</code>，目录和你的<code>r.rtrem.windows</code> 一致即可。</p>
<p>完成上面几项设置，接下来使用<code>ctrl+shist+p</code> 调出命令面板，然后输入<code>reload</code>，<strong>选择 Reload Window 执行</strong> ，重启 VS Code 即可。</p>
<p>目前 VS Code 已经实现了界面化设置，但是其本质是一个 json 格式的配置文件，你也可以在配置文件中进行修改和编辑。</p>
<h3 id="rtichoke"><a href="https://github.com/randy3k/rtichoke">rtichoke</a></h3>
<p>RStudio 中的 R Console 本身具备参数提示和补全等功能，很多人非常喜欢。然而到目前为止，如果直接在 VS Code 中执行 R 代码，它默认调用的是我们之前设置过的官方 R 终端，这个终端非常古老而且不友好。不过好在我们的「21 世纪 R console」<a href="https://github.com/randy3k/rtichoke">rtichoke</a> 即将登场。</p>
<p>说到 rtichoke 有不少人都知道它可以实现多行编辑、语法高亮和自动完成等功能，用起来基本不输 RStudio。不过他们中 99% 的人都是在 Linux 或者 macOS 中使用。因为这个软件本身是 Python 写的并且需要用命令行<code>pip</code>安装，很多 windows 用户心理嘀咕一句「tmd，windows 竟然不能用」然后卒，其实你是自己把自己放弃了。好在我还是那剩下的 1% 里在 Windows 使用 rtichoke 的用户，使用方法如下。</p>
<ul>
<li>在上文中你应该已经成功使用 anaconda 在你的电脑里装好了 Python，现在打开<code>Anaconda Prompt</code>，也就是 anaconda 自带的命令行工具。</li>
</ul>
<figure data-type="image" tabindex="3"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-7dd5b5073e77463d.png" alt="" loading="lazy"></figure>
<ul>
<li>输入<code>pip install -U rtichoke</code> 安装 rtichoke</li>
<li>安装完成后输入<code>rtichoke</code>测试是否调用成功</li>
<li>找到并进入你电脑里的 anaconda scripts 目录，正常情况下是 <code>C:\Users\youname\Anaconda3\Scripts\</code></li>
<li>不出意外里面应该有一个 exe 文件，叫做 <code>rtichoke.exe</code>，找到它并复制它的路径</li>
<li>在 VS Code 中重新设置<code>r.term.windows</code>为 <code>rtichoke.ext</code> 路径</li>
<li>找到<code>r.rterm.option</code> 选项，并在配置文件（json 格式）中注销掉这个选项下的<code>--no-save</code>和<code>no-restore</code>参数</li>
<li>重启 VS Code 后大功告成</li>
</ul>
<h2 id="r-运行使用效果">R 运行使用效果</h2>
<p>现在 R 运行的配置工作已经完成，一起来看下效果。首先，我在工作项目中打开一个 R 脚本 <code>test.R</code>，里面是一段<code>plotly</code> 测试代码。</p>
<ul>
<li>鼠标放在一个函数上自动出现函数功能和使用方法</li>
</ul>
<figure data-type="image" tabindex="4"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-fa266c03d2ff4bcf.png" alt="" loading="lazy"></figure>
<ul>
<li>鼠标放在一个内置数据集自动出现数据集介绍</li>
</ul>
<figure data-type="image" tabindex="5"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-96c5445f7b5c8fba.png" alt="" loading="lazy"></figure>
<ul>
<li>鼠标放在一个 R 包上自动出现 R 包介绍</li>
</ul>
<figure data-type="image" tabindex="6"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-bad241daf74178ba.png" alt="" loading="lazy"></figure>
<ul>
<li>输入部分函数自动提示</li>
</ul>
<figure data-type="image" tabindex="7"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-62a8b794a303a940.png" alt="" loading="lazy"></figure>
<ul>
<li>鼠标在函数括号里自动出现参数提示</li>
</ul>
<figure data-type="image" tabindex="8"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-019fc3c44813030c.png" alt="" loading="lazy"></figure>
<ul>
<li>选中部分代码，按一次<code>ctrl+enter</code> 自动进入集成终端，也就是 rtichoke</li>
</ul>
<figure data-type="image" tabindex="9"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-f2dae8960a5d938b.png" alt="" loading="lazy"></figure>
<ul>
<li>再按一次<code>ctrl+enter</code> 自动执行代码并输出结果</li>
</ul>
<figure data-type="image" tabindex="10"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-1926c19dc0f032e5.png" alt="" loading="lazy"></figure>
<p>如果想调用 View 等外部输出也是可以的，比如<code>View(tmp2)</code> 会弹出一个 R 默认终端的独立显示框，比如测试代码最后是<code>print</code> 一个 plotly 的绘图结果，那么它会自动调用你的默认浏览器进行输出。</p>
<figure data-type="image" tabindex="11"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-7a1ac288f100b27d.png" alt="" loading="lazy"></figure>
<h2 id="自定义-r-必备快捷键">自定义 R 必备快捷键</h2>
<p>如果你是一个老实的 R 语言用户，那么一定不会用 <code>=</code> 代替 <code>&lt;-</code>，但是 <code>&lt;-</code> 需要按两下键盘而且这两个键位置还挺远，更难过的是因为你用了语法提示如果你在<code>&lt;-</code> 两端没有加上空格它还会给你出现「大破浪」下划线恶心你。在 RStudio 中你可以使用 <code>alt + -</code> 一气呵成输入这四个符号<code>&lt;-</code>，在 VS Code 中必须也可以。</p>
<p>打开 Keyboard Shortcuts （快捷键是 <code>ctrl+k ctrl+s</code>)，在搜索框中搜索<code>alt+s</code>，这个时候你会看到这个快捷键已经被绑定了（别慌），点开 json 文件我们去给这个快捷键设置不同情境下新的含义。</p>
<figure data-type="image" tabindex="12"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-33a547445bc2716c.png" alt="" loading="lazy"></figure>
<p>点开快捷键配置文件之后不要管左边的内容，直接去右边设置就好，配置方法如图（至于为什么这么写，后面会写专门的快捷键相关文章）。从此以后在 R 或者 Rmd 文件里<code>alt+-</code>就变成了和 RStudio 一样的快捷键。</p>
<figure data-type="image" tabindex="13"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-8eb31d1671ff1b7a.png" alt="" loading="lazy"></figure>
<h2 id="配置-python-插件">配置 Python 插件</h2>
<p>如果把 R 的配置搞定，Python 的配置就显得很简单了。想愉快地使用 Python 只需要安装一个 <a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Python</a> 插件即可。</p>
<figure data-type="image" tabindex="14"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-ec8dd6a58833cfcc.png" alt="" loading="lazy"></figure>
<p>接下来设置默认的 Python 路径，如果是用 anaconda 默认安装路径应该是<code>C:\Users\yourname\Anaconda3\python.exe</code> ，这时使用的是默认 Python 解释器；与 R 同理，如果你想使用 anaconda 中的 ipython 那么可以把路径设置为 <code>C:\Users\yourname\Anaconda3\Scripts\ipython.exe</code>。</p>
<h2 id="错误提示和格式化">错误提示和格式化</h2>
<h3 id="安装和配置">安装和配置</h3>
<p>Python 默认的语法提示工具是 PyLint，也可以选择其他的 linter 工具，比如 <a href="https://gitlab.com/pycqa/flake8">flake8</a>，flake8 是 Python 官方发布的一款静态代码检查工具，如果想使用它的话首先在 anaconda 的命令行工具中安装<code>pip install flake8</code>；另外，在保存代码的时候 VS Code 可以自动进行 code formatting ，这个功能默认是关闭的且工具是 autopep8 , 如果想使用 <a href="https://pypi.org/project/yapf/">yafp</a>，则继续在命令行工具中安装 <code>pip install yapf</code>。</p>
<p>安装好这两个工具之后在 VS Code 的配置文件中进行设置：</p>
<pre><code class="language-json">&quot;python.linting.enabled&quot;: true
&quot;python.linting.flake8Enabled&quot;: true,
&quot;python.formatting.provider&quot;: &quot;yapf&quot;
</code></pre>
<h3 id="查看错误和修改">查看错误和修改</h3>
<p>在集中终端的 PROBLEMS 可以查看代码中存在的问题。如下图所示，错误报告中会提示问题，错误编号和所在行数位置，点击某一个具体的问题后编辑器就会自动定位到相应的行数。</p>
<figure data-type="image" tabindex="15"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/177622-75bfea992b39160e.png" alt="" loading="lazy"></figure>
<h3 id="禁止对某些文件进行检查">禁止对某些文件进行检查</h3>
<p>从上面的截图可以发现，我一个文件中竟然有 915 处问题，看来我这个智商基本就告别 Python 了。如果为了自我麻痹，我可以在设置中关闭代码检查，但真实情况是这个文件并不是一个真正的 Python 脚本，我只是想借用 Python 的语法高亮而已。</p>
<p>针对这种情况，我们可以选择单独对某一类（后缀）文件排除语法检查。比如我用 Python 语法高亮的这类非 Python 文件后缀通常我会被我命名为 <code>snakefile</code> ，那就可以进行如下设置：</p>
<pre><code class="language-json">&quot;python.linting.ignorePatterns&quot;: [
        &quot;.vscode/*.py&quot;,
        &quot;**/site-packages/**/*.py&quot;,
        &quot;*.snakefile&quot;
    ]
</code></pre>
<p>重启之后，在打开原文件，满屏的大波浪红线就无影无踪了。</p>
<p>当然，因为 VS Code 对 Python 的完善支持，在设置中还有非常多的相关参数可以调整，你可以在设置的搜索框中输入<code>python</code> 浏览一下，但因为我们本文预设是轻度编写代码就不在展开了。</p>
<p>另外，也可以参考官方的一些 Python 使用介绍</p>
<ul>
<li>
<p>https://code.visualstudio.com/docs/languages/python</p>
</li>
<li>
<p>https://code.visualstudio.com/docs/python/python-tutorial</p>
</li>
<li>
<p>https://code.visualstudio.com/docs/python/linting</p>
</li>
</ul>
<h2 id="windows-用户的一个痛点">windows 用户的一个痛点</h2>
<p>在文章开始，我说「本文以 PC 作为安装配置示例，Mac 基本类似且部分内容体验可能更优」，现在就表达一下这个小小的遗憾。随着 win10 的升级，Windows 已经可以安装自己的 Ubuntu 系统 「Windows Subsystem for Linux」，但是系统自带的 bash 那叫一个丑陋和难用。由于 VS Code 在集成终端上下了不少功夫，其实我一直都把它当成我的简洁版「XShell」来使用，体验也非常好。如果你想试试，只需要在配置文件中把<code>terminal.integrated.shell.windows</code> 由默认的<code>C:\\Windows\\System32\\cmd.exe</code> 改为<code>C:\\Windows\\System32\\bash.exe</code>，这个具体内容以后再写。但是如果 <a href="https://github.com/Microsoft/vscode-python/issues/67">在这个 bash 里调试 Python  是会出问题的</a>，修改起来即便能姑且使用也是拆了东墙补西墙。我暂时的解决方法是在预览版的 VS Code 中修改了默认的 terminal，在稳定版里还用 cmd.exe。</p>
<p>VS Code 基础知识思维导图见上一篇博客。</p>
<hr>
<figure data-type="image" tabindex="16"><img src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" alt="" loading="lazy"></figure>
<p><strong>本文作者</strong>：思考问题的熊</p>
<p><strong>版权声明</strong>：本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by-nc-nd/4.0">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议 (CC BY-NC-ND 4.0)</a> 进行许可。</p>
<figure data-type="image" tabindex="17"><img src="https://kaopubear-1254299507.cos.ap-shanghai.myqcloud.com/picgo/20190628083754.png" alt="扫码即刻沟通" loading="lazy"></figure>

        </div>
        <!-- Share to Twitter, Weibo, Telegram -->
        <div class="flex items-center">
          <div class="mr-4 flex items-center">
            <i class="ri-share-forward-line text-gray-500"></i>
          </div>
          <div class="px-4 cursor-pointer text-blue-500 hover:bg-blue-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTwitter">
            <i class="ri-twitter-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-red-500 hover:bg-red-100 dark:hover:bg-gray-600 inline-flex" @click="shareToWeibo">
            <i class="ri-weibo-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-indigo-500 hover:bg-indigo-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTelegram">
            <i class="ri-telegram-line"></i>
          </div>
        </div>
      </div>

      

      
        <div id="vlaine-comment"></div>
      

      <footer class="py-12 text-center px-4 md:px-0" v-pre>
  加入<a href="https://t.zsxq.com/UjiEaYZ" target="_blank">知识星球</a>
</footer>
    </div>

    <!-- TOC Container -->
    <div class="fixed right-0 bottom-0 mb-16 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white dark:bg-gray-500 dark:text-gray-200 hover:shadow-lg transition-all animated fadeInRight" @click="showToc = true">
      <i class="ri-file-list-line"></i>
    </div>

    <div class="fixed right-0 top-0 bottom-0 overflow-y-auto w-64 bg-white dark:bg-gray-800 p-4 border-l border-gray-100 dark:border-gray-600 z-10 transition-fast" :class="{ '-mr-64': !showToc }">
      <div class="flex mb-4 justify-end">
        <div class="w-8 h-8 inline-flex justify-center items-center rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-fast" @click="showToc = false">
          <i class="ri-close-line text-lg"></i>
        </div>
      </div>
      <div class="post-toc-container">
        <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%98%AF-vs-code">为什么是 VS Code</a></li>
<li><a href="#%E5%AE%89%E8%A3%85-r-%E5%92%8C-python">安装 R 和 Python</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE-r-%E6%8F%92%E4%BB%B6">配置 R 插件</a>
<ul>
<li><a href="#r-support-for-visual-studio-code">R support for Visual Studio Code</a></li>
<li><a href="#r-lsp-client">R LSP Client</a></li>
<li><a href="#rtichoke">rtichoke</a></li>
</ul>
</li>
<li><a href="#r-%E8%BF%90%E8%A1%8C%E4%BD%BF%E7%94%A8%E6%95%88%E6%9E%9C">R 运行使用效果</a></li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89-r-%E5%BF%85%E5%A4%87%E5%BF%AB%E6%8D%B7%E9%94%AE">自定义 R 必备快捷键</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE-python-%E6%8F%92%E4%BB%B6">配置 Python 插件</a></li>
<li><a href="#%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA%E5%92%8C%E6%A0%BC%E5%BC%8F%E5%8C%96">错误提示和格式化</a>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE">安装和配置</a></li>
<li><a href="#%E6%9F%A5%E7%9C%8B%E9%94%99%E8%AF%AF%E5%92%8C%E4%BF%AE%E6%94%B9">查看错误和修改</a></li>
<li><a href="#%E7%A6%81%E6%AD%A2%E5%AF%B9%E6%9F%90%E4%BA%9B%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%A3%80%E6%9F%A5">禁止对某些文件进行检查</a></li>
</ul>
</li>
<li><a href="#windows-%E7%94%A8%E6%88%B7%E7%9A%84%E4%B8%80%E4%B8%AA%E7%97%9B%E7%82%B9">windows 用户的一个痛点</a></li>
</ul>
</li>
</ul>

      </div>
    </div>

    <!-- Back to top -->
    <div class="fixed right-0 bottom-0 mb-4 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg transition-all dark:bg-gray-500 dark:text-gray-200" @click="backToUp" v-show="scrolled">
      <i class="ri-arrow-up-line"></i>
    </div>
  </div>

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg">
  </div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter">
        </div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip">
        </div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center">
        </div>
      </div>
    </div>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://blog.kaopubear.top/media/scripts/main.js"></script>
  
  <!-- Code Highlight -->
  
    <script src="https://blog.kaopubear.top/media/prism.js"></script>
    <script>
      Prism.highlightAll()
    </script>
  

  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>
  <script>
    //拿到预览框架，也就是上面的html代码
    var pswpElement = document.querySelectorAll('.pswp')[0];
    //定义图片数组变量
    var imgitems;
    /**
    * 用于显示预览界面
    * @param index 图片数组下标
    */
    function viewImg(index) {
      //其它选项这里不做过多阐述，详情见官网
      var pswpoptions = {
        index: parseInt(index, 10), // 开始幻灯片索引。0是第一张幻灯片。必须是整数，而不是字符串。
        bgOpacity: 0.7, // 背景透明度，0-1
        maxSpreadZoom: 3, // 缩放级别，不要太大
      };
      //初始化并打开PhotoSwipe，pswpElement对应上面预览框架，PhotoSwipeUI_Default为皮肤，imgitems为图片数组，pswpoptions为选项
      var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, imgitems, pswpoptions);
      gallery.init()
    }
    /**
    * 用于添加图片点击事件
    * @param img 图片元素
    * @param index 所属下标（在imgitems中的位置）
    */
    function addImgClick(img, index) {
      img.onclick = function() {
        viewImg(index)
      }
    }
    /**
    * 轮询所有图片，获取src、width、height等数据，加入imgitems，并给图片元素添加事件
    * 最好在onload中执行该方法，本站因放在最底部，所以直接初始化
    * 异步加载图片可在图片元素创建完成后调用此方法
    */
    function initImg() {
      //重置图片数组
      imgitems = [];
      //查找class:markdown 下的所有img元素并遍历
      var imgs = document.querySelectorAll('.markdown img');
      for (var i = 0; i < imgs.length; i++) {
        var img = imgs[i];
        //本站相册初始为loading图片，真实图片放在data-src
        var ds = img.getAttribute("data-src");
        //创建image对象，用于获取图片宽高
        var imgtemp = new Image();
        //判断是否存在data-src
        if (ds != null && ds.length > 0) {
          imgtemp.src = ds
        } else {
          imgtemp.src = img.src
        }
        //判断是否存在缓存
        if (imgtemp.complete) {
          var imgobj = {
            "src": imgtemp.src,
            "w": imgtemp.width,
            "h": imgtemp.height,
          };
          imgitems[i] = imgobj;
          addImgClick(img, i);
        } else {
          console.log('进来了2')
          imgtemp.index = i;
          imgtemp.img = img;
          imgtemp.onload = function() {
            var imgobj = {
              "src": this.src,
              "w": this.width,
              "h": this.height,
            };
            //不要使用push，因为onload前后顺序会不同
            imgitems[this.index] = imgobj
            //添加点击事件
            addImgClick(this.img, this.index);
          }
        }
      }
    }
    //初始化
    initImg();
  </script>
  
    <script type="application/javascript" src="https://unpkg.com/valine"></script>
<script type="application/javascript">
  new Valine({
    el: '#vlaine-comment',
    appId: 'HJ4ltM8KvCxAwTaMUjzls2a1-gzGzoHsz',
    appKey: 'mk4aFvoMPRnkE0VRiuYBp1mc',
    pageSize: 10,
    notify: true,
    avatar: 'mp',
    verify: true,
    placeholder: '不妨评论交流',
    visitor: true,
    highlight: true,
    recordIP: true,
  })
</script>
  
  
</body>

</html>